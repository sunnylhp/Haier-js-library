<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8>
	<title></title>
	<link href="http://libs.useso.com/js/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="http://libs.useso.com/js/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet">
	<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
</head>
<body>

<a href="#" id="uploadBtn">Upload</a>


<script src="plupload/plupload.full.min.js"></script>
<script src="plupload/haierUpload.js"></script>
<script>
/*
	基于 www.plupload.com/docs/
	与官方API 完全兼容 的基础上增加:
		autoUpload: 选择文件后自动上传 默认为false
		multipart_params: 可传object json 或者 返回json 的 function(){} 若为function 每次上传都为运行以拿到最新数据(常用于表单)
		Error: 发生错误都会console.log 错误信息
	
	初次使用时注意 确认 plupload/haierUpload.js 里面的 
		flash_swf_url
		silverlight_xap_url
	配置url正确
*/
var uploader = HaierJS.plupload({
	url: '../file.php',
	browse_button: 'uploadBtn',
	autoUpload: true,
	multipart_params: function(){
		return {
			username: $('#username').val()
		}
	},
	init: {
		PostInit: function(up, file){
			// 初始化执行
			alert(1);
		},
		BeforeUpload: function(up, file){
			// 上传之前执行
			alert('before');
		},
		FilesAdded: function(up, file){
			// 添加文件执行
			up.start();
		},
		UploadProgress: function(up, file){
			console.log(file.percent);
		},
		FileUploaded: function(up, files){
			// 上传成功后执行
		},
		Error: function(up, err){
			console.log(err);
			alert('error');
		}
	}
});

</script>
</body>
</html>